<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" type="text/css" href="css/index.css">
    <link rel="stylesheet" type="text/css" href="jquery/jquery.mobile-1.4.5.css" />
    <link rel="stylesheet" type="text/css" href="css/set1.css" />
    <title>Contract</title>
    <style>
        html, body, div[data-role ="page"] {
            height: 100%;
            width: 100%;
            margin: 0px;
            padding: 0px;
        }

        .ui-content {
            max-height: 100%;
            width: 100%;
            margin: 0px;
            padding: 0px;
            background-size: 100% 100%;
            min-height: 100%;
        }

        .table_m_der {
            border: solid #b3d1e7 1px;
            border-collapse: collapse;
        }

        .button {
            -webkit-border-radius: 5px;
            border-radius: 5px;
            display: inline-block;
            padding: 0 20px;
            margin-bottom: 20px;
            cursor: pointer;
            width: 90%;
            background: #0065B3;
            background: -webkit-gradient(linear, 0 0, 0 70%, from(#0065B3), to(#0065B3));
            background: linear-gradient(#0065B3, #0065B3 70%);
            border: 1px solid #C97917;
            font-size: 0.8em;
            font-weight: 200;
            font-family: Tahoma, Arial, Helvetica;
            font-weight: bold;
            color: #FFFFFF;
            text-shadow: 0 -1px 0 #0065B3;
            height: 40px;
            line-height: 40px;
            text-align: center;
        }

            .button span {
                cursor: pointer;
                display: inline-block;
                position: relative;
                transition: 0.5s;
            }

                .button span:after {
                    content: '\00bb';
                    position: absolute;
                    opacity: 0;
                    top: 0;
                    right: -20px;
                    transition: 0.5s;
                }

            .button:hover span {
                padding-right: 25px;
            }

                .button:hover span:after {
                    opacity: 1;
                    right: 0;
                }
    </style>
    <style type="text/css">
        .ocultar {
            display: none;
        }

        .text-line {
            background-color: transparent;
            color: black;
            /*font-family:'Segoe Script';*/
            font-size: 1.25em;
            outline: none;
            outline-style: none;
            outline-offset: 0;
            border-top: none;
            border-left: none;
            border-right: none;
            border-bottom: solid silver 1px;
            padding: 5px 5px;
        }

        .text-line-signed {
            background-color: transparent;
            color: black;
            /*font-family:'Segoe Script';*/
            font: 400 100px/1.3 'Arizonia', Helvetica, sans-serif;
            font-size: 1.30em;
            outline: none;
            outline-style: none;
            outline-offset: 0;
            border-top: none;
            border-left: none;
            border-right: none;
            border-bottom: solid silver 1px;
            padding: 5px 5px;
        }

        .text-line-signed-form {
            background-color: silver;
            color: black;
            font-family: Helvetica, Arial, sans-serif;
            /*font: 400 100px/1.3 'Arizonia', Helvetica, sans-serif;*/
            font-size: 2.0em;
            outline: none;
            outline-style: none;
            outline-offset: 0;
            border-top: none;
            border-left: none;
            border-right: none;
            border-bottom: solid silver 1px;
            padding: 5px 5px;
            width: 400px;
            text-align: center;
        }
    </style>

</head>
<body>

    <div data-role="page" id="principal" data-title="Principal" data-url="principal">
        <!-- /header-->
        <div data-role="header" data-position="fixed" data-tap-toggle="false" style="background-color:#0065B3;color:white;">
            <!--                <h1 id="span1">Contracts</h1>-->
            <a href="javascript:history.back(1);" data-role="button" data-icon="arrow-l" data-iconpos="notext" data-theme="b" data-iconshadow="false" data-inline="true"></a>
        </div>
        <div data-role="tabs" data-position="fixed" data-tap-toggle="false" id="tabs">
            <!-- /content-->

            <div data-role="navbar" id="tabs" data-position="fixed" data-tap-toggle="false">
                <ul>
                    <li><a class="ui-btn-active" href="#view2" data-ajax="false">View Contract</a></li>
                    <li><a href="#contract2" data-ajax="false">Signed Contract</a></li>
                </ul>
            </div>

            <div data-role="content" id="view2" style="background-color:white; align-content:center;height:100%;">
                <div id="divViewContract" style="overflow: auto!important; -webkit-overflow-scrolling: touch!important;">
                    <!--                        <embed id="FramePDF" src="https://chancesrmis.com/crmg-usa/Documentos/91/302/112814-Blue%20Grass-COI-BAP.pdf#view=Fit" type="application/pdf" width="575" height="500"/>-->
                    <!--                    <object id="FramePDF" type="application/pdf" trusted="yes" application="yes" title="Assembly" data="https://chancesrmis.com/crmg-usa/Documentos/91/302/112814-Blue%20Grass-COI-BAP.pdf#zoom=100&scrollbar=1&toolbar=1&navpanes=1">-->
                    <!--                    </object>-->
                    <iframe id="FramePDF" src="" scrolling="auto" frameborder="0" hspace="0" vspace="0" type="application/pdf" width="100%" style="position:relative;-webkit-overflow-scrolling: touch !important;overflow-y: scroll !important;"></iframe>
                </div>
            </div>

            <div data-role="content" id="contract2" style="overflow-y: scroll;
                -webkit-overflow-scrolling: touch;background-color:white; align-content:center;">
                <table width="100%" align="center">
                    <tr>
                        <td width="30%" style="text-align:left" colspan="2">
                            <img src="images/uno.png" id="img1" />
                            <label style="text-align:left; font-size:0.7em">Signee Name: </label>
                        </td>
                        <td width="70%">
                            <span class="input input--hoshi">
                                <input class="input__field input__field--hoshi" type="text" id="txtSigneeName" placeholder="Enter Signee Name" />
                                <label class="input__label input__label--hoshi input__label--hoshi-color-3" for="input-6">
                                </label>
                            </span>
                        </td>
                    </tr>
                    <tr>
                        <td width="30%" style="text-align:left" colspan="2">
                            <img src="images/dos.png" id="img2" />
                            <label style="text-align:left;font-size:0.7em">Initials: </label>
                        </td>
                        <td width="70%">
                            <span class="input input--hoshi">
                                <input class="input__field input__field--hoshi" type="text" id="txtInitialSignee" placeholder="Enter Initial" />
                                <label class="input__label input__label--hoshi input__label--hoshi-color-3" for="input-6">
                                </label>
                            </span>
                        </td>
                    </tr>
                    <tr>
                        <td width="30%" style="text-align:left" colspan="2">
                            <img src="images/tres.png" id="img3" />
                            <label style="text-align:left;font-size:0.7em">Title: </label>
                        </td>
                        <td width="70%">
                            <span class="input input--hoshi">
                                <input class="input__field input__field--hoshi" type="text" id="txtTitleSignee" placeholder="Enter Title Signee" />
                                <label class="input__label input__label--hoshi input__label--hoshi-color-3" for="input-6">
                                </label>
                            </span>
                        </td>
                    </tr>
                </table>
                <table width="100%" align="center">
                    <tr>
                        <td>
                            <button class="button" type="button" onclick="ReviewContract();" id="btnReviewContract">
                                <span>Review</span>
                            </button>
                        </td>
                        <td>
                            <button class="button" type="button" onclick="SendAndSubmit();" id="btnSendAndSubmit">
                                <span>Send and Submit</span>
                            </button>
                        </td>
                    </tr>
                </table>
                <table>
                    <tr>
                        <td>
                            <div id="DivContentHTML" style="display:none;">
                                <div style="overflow: no-display;">
                                    <div id="DivTemplate">
                                        <div id="Divpdf">

                                        </div>
                                    </div>
                                </div>
                                <br />
                                Initial
                                <input type="text" id="txtInitial" readonly="readonly" class="text-line-signed-form" width="5%" onclick="SignedInitial();" ToolTip="Click to Enter Initials" BackColor="Silver" />
                                <input type="button" id="btnBack" class="bt_login" alt="0" onclick="Backpage()" style="display:none;" value="Back" />
                                <input type="button" id="btnNext" class="bt_login" alt="0" onclick="Nextpage()" value="Next" />
                                <input id="hdnTotalPage" type="hidden" />
                            </div>
                        </td>
                    </tr>
                </table>
            </div>

        </div>

    </div>

    <div id="loader" style="display:none;">
        <div id="center">
            <img src="images/ajax-loader.gif" />
        </div>
    </div>

    <script type="text/javascript" src="cordova.js"></script>
    <script type="text/javascript" src="scripts/platformOverrides.js"></script>
    <script type="text/javascript" src="scripts/index.js"></script>
    <script type="text/javascript" src="scripts/PushNotification.js"></script>
    <script type="text/javascript" src="jquery/jquery-2.1.3.min.js"></script>
    <script type="text/javascript" src="jquery/jquery.mobile-1.4.5.js"></script>
    <script type="text/javascript" src="scripts/encodedecode.js"></script>
    <script type="text/javascript" src="scripts/common.js"></script>
    <script type="text/javascript">
        var arr = new Array();
        var reviewed = 0;
        $(document).ready(function () {
            //alert(window.localStorage["DocumentName"]);
            var CodeCompany = window.localStorage["Code"];//"3456";
            var IdContract = getUrlVars()["idcon"];//3797;
            var IdVendor = window.localStorage["IdVendor"];//1268;
            var IdCompany = window.localStorage["IdCompany"];//91;
            //alert(CodeCompany + ' - ' + IdContract + ' - ' + IdVendor + ' - ' + IdCompany);
            OpenFileContract(CodeCompany, IdContract, IdVendor, IdCompany);
            $('#FramePDF').height(getRealContentHeight() - 40);
            //$('.ui-content').css('background-image','url(Image/timer.png)');
        });

        function SignedInitial() {
            try {
                if ($("#txtInitial").val().trim() == "") {
                    $("#txtInitial").val($("#txtInitialSignee").val().trim());
                } else {
                    $("#txtInitial").val('');
                }
                AsignArraySignedInitial();
            } catch (ex) {
                alert(ex.message);
            }
        }

        function AsignArraySignedInitial() {
            try {
                //**************************************************
                var SignedInitial = true;
                var page = (parseInt($("#btnNext").attr('alt')) - 1);
                arr[page] = $("#txtInitial").val();
                //**************************************************
                for (var i = 0; i < arr.length; i++) {
                    if (arr[i] == '') {
                        SignedInitial = false;
                        break;
                    }
                }
                //**************************************************
                if (arr.length != parseInt($("#hdnTotalPage").val())) {
                    SignedInitial = false;
                }
                if (SignedInitial) {
                    //$("#btnSignedContract").attr('disabled', '');
                    return true;
                }
                //**************************************************
                return false;
                //**************************************************
            } catch (ex) {
                alert(ex.message);
            }
        }

        function ReviewContract() {
            try {
                reviewed = 1;
                if ($("#txtSigneeName").val().trim() == "") {
                    navigator.notification.alert('Enter a Signee Name.', function () { }, "ChancesR Validation");
                    return false;
                }
                if ($("#txtInitialSignee").val().trim() == "") {
                    navigator.notification.alert('Enter a Initial Signee.', function () { }, "ChancesR Validation");
                    return false;
                }
                if ($("#txtTitleSignee").val().trim() == "") {
                    navigator.notification.alert('Enter a Title Signee.', function () { }, "ChancesR Validation");
                    return false;
                }
                //**************************************
                var ETemplateContract = {
                    CodeCompany: window.localStorage["Code"],
                    IdVendor: window.localStorage["IdVendor"],
                    IdCompany: window.localStorage["IdCompany"],
                    IdJob: 1661,//window.localStorage["IdJob"],
                    IdContractType: 40,//window.localStorage["IdContractType"],
                    SigneNameVendor: $("#txtSigneeName").val(),
                    TitleVendor: $("#txtTitleSignee").val(),
                    Signed: 0
                };
                //@IdVendor=939,@IdCompany=91,@IdJob=1157,@IdContractType=39
                //@IdVendor=1125,@IdCompany=91,@IdJob=1661,@IdContractType=40
                //alert(JSON.stringify({ Entity: ETemplateContract }));
                //navigator.notification.alert(JSON.stringify({ Entity: ETemplateContract }), function () { }, "ChancesR Error");
                //**************************************
                $.ajax({
                    cache: true,
                    url: "https://services.chancesrmis.com/ServicesMobile/wcfchancesR/ContractSigned.svc/GetTemplateContracts",
                    async: true,
                    crossDomain: true,
                    type: "POST",
                    data: JSON.stringify({ Entity: ETemplateContract }),
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    beforeSend: function (xhr) {
                        xhr.setRequestHeader("Authorization", "Basic " + Base64.encode("jcJizIJh4EH/e4CBrJFW+A==" + ":" + "d6jlUv9AGSgd219JJvPShA=="));
                        xhr.setRequestHeader("X-Mobile", "false");
                        $('#loader').show();
                    },
                    error: function (xhr, textStatus, err) {
                        var mensaje = "readyState: " + xhr.readyState + "\n";
                        mensaje = mensaje + "responseText: " + xhr.responseText + "\n";
                        mensaje = mensaje + "status: " + xhr.status + "\n";
                        mensaje = mensaje + "text status: " + textStatus + "\n";
                        mensaje = mensaje + "error: " + err + "\n";
                        $('#loader').hide();
                        navigator.notification.alert(mensaje, function () { }, "ChancesR Error");
                    },
                    success: function (lstObj) {
                        //*****************************
                        //alert(lstObj.GetTemplateContractsResult);
                        //*****************************
                        if (lstObj.GetTemplateContractsResult.length > 0) {
                            //*****************************
                            var i = 0;
                            var strHtml = "";
                            //*****************************
                            $.each(lstObj.GetTemplateContractsResult, function (Data) {
                                strHtml += "<div id='Div_" + i.toString() + "' style='display:none;visibility:hidden;'>";
                                strHtml += this.Contenido;
                                strHtml += "</div>";
                                if (i < lstObj.GetTemplateContractsResult.length) {
                                    strHtml += "<newpage/>";
                                }
                                i++;
                            });
                            //*****************************
                            strHtml = strHtml.replace("/admin-chiquita", "https://chancesrmis.com/admin-chiquita");
                            strHtml = strHtml.replace("/Admin-usa", "https://chancesrmis.com/admin-usa");
                            strHtml = strHtml.replace("/crmg-chiquita", "https://chancesrmis.com/crmg-chiquita");
                            strHtml = strHtml.replace("/crmg-usa", "https://chancesrmis.com/crmg-usa");
                            strHtml = strHtml.replace("<br>", "<br />");
                            strHtml = strHtml.replace("<br >", "<br />");
                            strHtml = strHtml.replace("\r", "").replace("\n", "").replace("  ", "");
                            strHtml = strHtml.replace("[[SIGNEENAME]]", "<input id='txtSigneeNameContractForm' type='text' class='text-line-signed-form' title='Click to Enter Signature' onclick='SignedNameContract(this);' readonly='readonly' />");
                            strHtml = strHtml.replace("[[SIGNEENAME1]]", "<input id='txtSigneeNameContractForm1' type='text' class='text-line-signed-form' title='Click to Enter Signature' onclick='SignedNameContract(this);' readonly='readonly' />");
                            strHtml = strHtml.replace("[[SIGNEENAME2]]", "<input id='txtSigneeNameContractForm2' type='text' class='text-line-signed-form' title='Click to Enter Signature' onclick='SignedNameContract(this);' readonly='readonly' />");
                            strHtml = strHtml.replace("[[SIGNEENAME3]]", "<input id='txtSigneeNameContractForm3' type='text' class='text-line-signed-form' title='Click to Enter Signature' onclick='SignedNameContract(this);' readonly='readonly' />");
                            strHtml = strHtml.replace("[[SIGNEENAME4]]", "<input id='txtSigneeNameContractForm4' type='text' class='text-line-signed-form' title='Click to Enter Signature' onclick='SignedNameContract(this);' readonly='readonly' />");
                            strHtml = strHtml.replace("[[SIGNEENAME5]]", "<input id='txtSigneeNameContractForm5' type='text' class='text-line-signed-form' title='Click to Enter Signature' onclick='SignedNameContract(this);' readonly='readonly' />");
                            strHtml = strHtml.replace("[[SIGNEENAMEADDENDUM]]", "<input id='txtSigneeNameContractForm6' type='text' class='text-line-signed-form' title='Click to Enter Signature' onclick='SignedNameContract(this);' readonly='readonly' />");
                            //*****************************
                            $("#DivContentHTML").show();
                            //*****************************
                            $("#btnReviewContract").attr('disabled', 'disabled');
                            //*****************************
                            $("#hdnTotalPage").val(Split("<newpage/>", strHtml).length - 1);
                            //*****************************
                            $("#Divpdf").html(strHtml);
                            //*****************************
                            $("#btnNext").click();
                            //*****************************
                        }
                        else {
                            //*****************************
                            navigator.notification.alert('Federal ID no found', function () { }, "ChancesR Validation");
                            //*****************************
                        }
                    },
                    complete: function () {
                        $('#loader').hide();
                    }
                });
                //***************************************
            } catch (ex) {
                alert(ex.message);
            }
        }

        function Backpage() {
            try {
                //********************************************
                var totalpage = parseInt($("#hdnTotalPage").val());
                var page = parseInt($("#btnNext").attr('alt')) - 2;
                var nextpage = parseInt($("#btnNext").attr('alt')) - 1;
                if (nextpage > 1) {
                    $("#btnBack").css('display', '');
                } else {
                    $("#btnBack").css('display', 'none');
                }
                if (nextpage >= totalpage) {
                    $("#btnNext").css('display', 'none');
                } else {
                    $("#btnNext").css('display', '');
                }
                //********************************************
                $("#btnNext").attr('alt', nextpage.toString());
                //********************************************
                for (var i = 0; i <= totalpage; i++) {
                    $("#Div_" + i.toString()).css('visibility', 'hidden');
                    $("#Div_" + i.toString()).css('display', 'none');
                }
                //********************************************
                $("#Div_" + page.toString()).css('visibility', 'visible');
                $("#Div_" + page.toString()).css('display', 'block');
                //********************************************
                $("#txtInitial").val(arr[page]);
                //********************************************
            } catch (ex) {
                alert(ex.message);
            }
        }

        function Nextpage() {
            try {
                //********************************************
                AsignArraySignedInitial();
                //********************************************
                var totalpage = parseInt($("#hdnTotalPage").val());
                var page = $("#btnNext").attr('alt');
                var nextpage = parseInt(page) + 1;
                //********************************************
                if (nextpage > 1) {
                    $("#btnBack").css('display', '');
                } else {
                    $("#btnBack").css('display', 'none');
                }
                if (nextpage >= totalpage) {
                    $("#btnNext").css('display', 'none');
                } else {
                    $("#btnNext").css('display', '');
                }
                //********************************************
                $("#btnNext").attr('alt', nextpage.toString());
                //********************************************
                for (var i = 0; i <= totalpage; i++) {
                    $("#Div_" + i.toString()).css('visibility', 'hidden');
                    $("#Div_" + i.toString()).css('display', 'none');
                }
                //********************************************
                $("#Div_" + page).css('visibility', 'visible');
                $("#Div_" + page).css('display', 'block');
                //********************************************
                if (arr[page] != undefined) {
                    $("#txtInitial").val(arr[page]);
                } else {
                    $("#txtInitial").val('');
                }
                $("#Div_" + page).offset().top = '0px';
                irArriba();
                //********************************************
            } catch (ex) {
                alert(ex.message);
            }
        }

        function irArriba() {
            try {
                $('body, html').animate({ scrollTop: '0px' }, 300);
            } catch (ex) {
                alert(ex.message);
            }
        }

        function Split(caracter, string) {
            var arra = new Array();
            var i = 0
            while (string.length > 0) {
                var posicion = string.indexOf(caracter);
                if (posicion >= 0) {
                    var cadena = string.substring(0, posicion);
                    arra[i] = cadena;
                    string = string.substring(posicion + 1, string.length);
                    i++;
                } else {
                    if (string.length > 0 && posicion == -1) {
                        arra[i] = string;
                        string = '';
                    }
                }
            }
            return arra;
        }

        function SignedNameContract(control) {
            try {
                if ($("#" + control.id).val() != undefined) {
                    if ($("#" + control.id).val().trim() == "") {
                        $("#" + control.id).val($("#txtSigneeName").val());
                    } else {
                        $("#" + control.id).val('');
                    }
                }
                //AsignArraySignedInitial();
            } catch (ex) {
                alert(ex.message);
            }
        }

        function OpenFileContract(Code, IdContract, IdVendor, IdCompany) {
            try {
                //**************************************
                var EContract = {
                    CodeCompany: Code,//"3456",
                    IdContract: IdContract,//3797,
                    IdVendor: IdVendor,//1268,
                    IdCompany: IdCompany//91
                };
                //alert(JSON.stringify(EContract));
                //**************************************
                $.ajax({
                    cache: true,
                    url: "https://services.chancesrmis.com/ServicesMobile/wcfchancesR/ContractSigned.svc/GetContractsPathName",
                    async: true,
                    crossDomain: true,
                    type: "POST",
                    data: JSON.stringify({ Entity: EContract }),
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    beforeSend: function (xhr) {
                        xhr.setRequestHeader("Authorization", "Basic " + Base64.encode("jcJizIJh4EH/e4CBrJFW+A==" + ":" + "d6jlUv9AGSgd219JJvPShA=="));
                        xhr.setRequestHeader("X-Mobile", "false");
                        $('#loader').show();
                    },
                    error: function (xhr, textStatus, err) {
                        var mensaje = "readyState: " + xhr.readyState + "\n";
                        mensaje = mensaje + "responseText: " + xhr.responseText + "\n";
                        mensaje = mensaje + "status: " + xhr.status + "\n";
                        mensaje = mensaje + "text status: " + textStatus + "\n";
                        mensaje = mensaje + "error: " + err + "\n";
                        $('#loader').hide();
                        navigator.notification.alert(mensaje, function () { }, "ChancesR Error");
                    },
                    success: function (lstObj) {
                        //**************************************
                        //alert(lstObj.GetContractsPathNameResult);
                        $('#FramePDF').attr('src', lstObj.GetContractsPathNameResult);
                        //**************************************
                    },
                    complete: function () {
                        $('#loader').hide();
                    }
                });
                //***************************************
            } catch (ex) {
                alert(ex.message);
            }
        }

        function SendAndSubmit() {
            //alert(("#txtSigneeNameContractForm1").val());
            //alert("chasu");
            if (reviewed == 0) {
                alert("Please review the contract first.");
                return false;
            }
            for (var i = 0; i <= 6; i++) {
                if ($("#txtSigneeNameContractForm" + (i == 0 ? "" : "" + i + "")).val() != undefined) {
                    var firma = $("#txtSigneeNameContractForm" + (i == 0 ? "" : "" + i + "")).val();
                    if (firma.length == 0) {
                        alert("Signee all the pages.");
                        return false;
                    }
                }
            }
            if ($("#txtSigneeName").val().trim() == "") {
                navigator.notification.alert("Enter a Signee Name.");
                return false;
            }
            if ($("#txtInitialSignee").val().trim() == "") {
                navigator.notification.alert("Enter a Initial Signee.");
                return false;
            }
            if ($("#txtTitleSignee").val().trim() == "") {
                navigator.notification.alert("Enter a Title Signee.");
                return false;
            }
            if (!AsignArraySignedInitial) {
                alert("Sign the initial in all the pages before continue.");
                return false;
            }
            var input = {
                code: window.localStorage["Code"],
                IdCompany: parseInt(window.localStorage["IdCompany"]),
                IdContract: parseInt(window.localStorage["IdContract"]),
                IdVendor: parseInt(window.localStorage["IdVendor"]),
                IdJob: parseInt(window.localStorage["IdJob"]),
                IdContractType: parseInt(window.localStorage["IdContractType"]),
                DocumentName: window.localStorage["DocumentName"] + "-signed",
                Archivo: window.localStorage["DocumentName"] + "-signed.pdf",
                SigneeName: $("#txtSigneeName").val().trim(),
                Title: $("#txtTitleSignee").val().trim(),
                initial: $("#txtInitialSignee").val().trim(),
                Description: "",
                UserRegister: window.localStorage["IdContract"],
                IdContractBoth: 0
            };
            //alert(JSON.stringify(input));
            $.ajax({
                cache: true,
                url: "https://services.chancesrmis.com/ServicesMobile/wcfchancesR/ContractSigned.svc/ReviewedContract",
                async: true,
                crossDomain: true,
                type: "POST",
                data: JSON.stringify(input),
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                beforeSend: function (xhr) {
                    xhr.setRequestHeader("Authorization", "Basic " + Base64.encode("jcJizIJh4EH/e4CBrJFW+A==" + ":" + "d6jlUv9AGSgd219JJvPShA=="));
                    xhr.setRequestHeader("X-Mobile", "false");
                    $('#loader').show();
                },
                error: function (xhr, textStatus, err) {
                    var mensaje = "readyState: " + xhr.readyState + "\n";
                    mensaje = mensaje + "responseText: " + xhr.responseText + "\n";
                    mensaje = mensaje + "status: " + xhr.status + "\n";
                    mensaje = mensaje + "text status: " + textStatus + "\n";
                    mensaje = mensaje + "error: " + err + "\n";
                    $('#loader').hide();
                    navigator.notification.alert(mensaje, function () { }, "ChancesR Error");
                },
                success: function (lstObj) {
                    $('#loader').hide();
                    alert("Documento registrado correctamente");
                    window.history.back();
                }
            });
        }

    </script>
</body>
</html>